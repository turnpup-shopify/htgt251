{% schema %}
  {
    "name": "Marquee - turnpup",
    "class": "turnpup-marquee",
    "settings": [
  		{
        "type": "header",
        "content": "Module",
        "info": "Options for the overall module"
      },
      {
      "type": "text",
      "id": "container_width",
      "label": "Module Width",
      "default": "65%"
      },
      {
        "type": "range",
        "id": "container_top_margin",
        "min": 0,
        "max": 200,
        "step": 10,
        "unit": "px",
        "label": "Spacing at top of Module.",
        "default": 20
      },
      {
        "type": "range",
        "id": "container_bottom_margin",
        "min": 0,
        "max": 200,
        "step": 10,
        "unit": "px",
        "label": "Spacing at bottom of Module.",
        "default": 20
      },
      {
	      "type": "header",
	      "content": "Colors",
	      "info": "Color options for the module"
	    },
	    {
			"type": "color",
			"id": "module_background_color",
			"label": "Module Background Color",
			"default": "#0c2a4a"
      },
      {
        "type": "color",
        "id": "header_text_color",
        "label": "Header Text Color",
        "default": "#B4ECFF"
      },
      {
        "type": "header",
        "content": "Header Text",
        "info": "The text that shows above the carousel of logos"
      },
      {
        "type": "text",
        "id": "header_text",
        "label": "Header Text",
        "default": "As raved about in:"
      },
      {
        "type": "text",
        "id": "header_font_size",
        "label": "Header Desktop Text Size",
        "default": "40px"
      },
      {
        "type": "text",
        "id": "header_mobile_font_size",
        "label": "Header Mobile Text Size",
        "default": "22px"
      },
      {
        "type": "font_picker",
        "id": "header_font_family",
        "label": "Header Text Size",
        "default": "assistant_n4"
      },
      {
        "type": "text",
        "id": "header_font_weight",
        "label": "Header Font Weight",
        "default": "800"
      },
      {
        "type": "header",
        "content": "Logos",
        "info": "This section has settings for the logos"
      },
      {
        "type": "range",
        "id": "marquee_speed_seconds",
        "min": 2,
        "max": 60,
        "step": 1,
        "unit": "s",
        "label": "Marquee Speed (seconds per loop)",
        "default": 10
      },
			{
				"type": "text",
				"id": "desktop_logo_height",
				"label": "Desktop Logo Height (e.g. 80px)",
				"default": "50px"
			},
			{
				"type": "text",
				"id": "mobile_logo_height",
				"label": "Mobile Logo Height (e.g. 30px)",
				"default": "30px"
			},
      {
        "type": "range",
        "id": "desktop_space_between",
        "min": 0,
        "max": 200,
        "step": 10,
        "unit": "px",
        "label": "Desktop Space Between Logos",
        "default": 20
      },
      {
        "type": "range",
        "id": "mobile_space_between",
        "min": 0,
        "max": 200,
        "step": 10,
        "unit": "px",
        "label": "Mobile Space Between Logos",
        "default": 20
      }
		],
		"blocks": [
			{
				"name": "Logo",
				"type": "logo",
				"settings": [
					{
						"type": "header",
						"content": "Logo",
						"info": "_"
					},
					{
						"type": "image_picker",
						"id": "logo",
						"label": "Logo"				
					},
					{
						"type": "text",
						"id": "link_to_article",
						"label": "Link to Article",
            "default": "https://flwrmarket.com"				
					}
				]
			}
	    ],
		"presets": [
		  {
		    "name": "FLWR PR Marquee",
		    "category": "Custom",
		    "blocks": [

		    ]
      }
    ]
  }
{% endschema %}

<div class="flwr-pr-marquee-container">
  <p class="flwr-title"> {{ section.settings.header_text}} </p>
  <div class="marquee">
    <div class="marquee__inner">
      {%- for i in (1..2) -%}
        {%- for block in section.blocks -%}
          <a aria-label="{{ block.settings.logo.alt }}" class="flwr-marquee" target="_new" href="{{block.settings.link_to_article}}">
            {{ block.settings.logo | image_url: width: 400 | image_tag: alt: block.settings.logo.alt, 
              loading: 'lazy', 
              height: section.settings.desktop_logo_height
            }}
            {% comment %} <img height="{{ section.settings.desktop_logo_height }}" alt="{{ block.settings.logo.alt }}" src="{{ block.settings.logo | img_url: '400x400'}}"> {% endcomment %}
          </a>
        {%- endfor -%}         
      {%- endfor -%}         
    </div>
  </div>
</div>

<style>  
.turnpup-marquee {
  background-color: {{ section.settings.module_background_color }};
}
.flwr-pr-marquee-container {
  padding: {{ section.settings.container_top_margin }}px 0 {{ section.settings.container_bottom_margin }}px;
  overflow: hidden;
}
.flwr-title {
  text-align: center;
  font-family: {{ section.settings.header_font_family }};
  font-size: {{ section.settings.header_font_size }};
  font-weight: {{ section.settings.header_font_weight }};
  max-width: {{ section.settings.container_width }};
  color: {{ section.settings.header_text_color }};
  margin: 0;
  line-height: 1.1;
}
.marquee {
    position: relative;
    overflow: hidden;
    --offset: 0vw;
    --move-initial: calc(-0% + var(--offset));
    --move-final: calc(-50% + var(--offset));
    width: 100%;
    line-height: 1;
}

.marquee__inner {
    width: max-content;
    display: flex;
    position: relative;
    justify-content: flex-start;
    gap: {{ section.settings.desktop_space_between }}px;
    transform: translate3d(var(--move-initial), 0, 0);
    animation: marquee {{ section.settings.marquee_speed_seconds }}s linear infinite;
    animation-play-state: running;
}

  .flwr-marquee img {
    background-color: transparent;
    height: {{ section.settings.desktop_logo_height }};
  }
  .marquee__inner a {

  }

.marquee:hover .marquee__inner {
    animation-play-state: paused;
}

@keyframes marquee {
    0% {
        transform: translate3d(var(--move-initial), 0, 0);
    }

    100% {
        transform: translate3d(var(--move-final), 0, 0);
    }
}


  
  @media screen and (max-width: 700px) {                       
    .flwr-marquee img {
      height: {{ section.settings.mobile_logo_height }};      
      width: auto;
    }
    .marquee__inner {
      gap: {{ section.settings.mobile_space_between }}px;
    }
    .marquee__inner a {

    }
    .flwr-title {
      font-size: {{ section.settings.header_mobile_font_size }};
    }
  }
</style>

{% schema %}
  {
    "name": "custom-image-row",
    "class": "custom-image-row",
    "settings": [
      {
        "type": "text",
        "id": "metaobject_handle",
        "label": "Image Row Metaobject Handle",
        "info": "To add an image row, please go to your [metaobject](/admin/content/metaobjects/entries/image_row)."
      },
      {
        "type": "metaobject",
        "id": "tp_metaobject",
        "label": "Image Row Metaobject ",
        "info": "Add a metaobject",
        "metaobject_type": "image_row"
      },      
      {
        "type": "text",
        "id": "image_grid_header",
        "label": "Image Grid Header"
      },
      {
        "type": "text",
        "id": "keyword_to_remove",
        "label": "Keyword to Remove"
      },      
      {
        "type": "text",
        "id": "header_font_family",
        "label": "Header Font Family",
        "default": "'p22-mackinac-pro', serif;"
      },
      {
        "type": "text",
        "id": "header_font_size",
        "label": "Header Font Size",
        "default": "30px"
      }, {
        "type": "text",
        "id": "header_font_weight",
        "label": "Header Font Weight",
        "default": "400"
      }, {
        "type": "color",
        "id": "header_font_color",
        "label": "Header Font Color",
        "default": "#3C64B1"
      }, {
        "type": "text",
        "id": "image_grid_subheader",
        "label": "Image Grid subheader"
      }, {
        "type": "text",
        "id": "subheader_font_family",
        "label": "subheader Font Family",
        "default": "'p22-mackinac-pro', serif;"
      }, {
        "type": "text",
        "id": "subheader_font_size",
        "label": "subheader Font Size",
        "default": "30px"
      }, {
        "type": "text",
        "id": "subheader_font_weight",
        "label": "subheader Font Weight",
        "default": "400"
      }, {
        "type": "color",
        "id": "subheader_font_color",
        "label": "subheader Font Color",
        "default": "#3C64B1"
      }, {
        "type": "select",
        "id": "header_alignment",
        "label": "Header Alignment",
        "options": [
          {
            "value": "left",
            "label": "Left"
          }, {
            "value": "center",
            "label": "Center"
          }, {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "center"
      }
    ],
    "presets": [
      {
        "name": "Custom Image Row",
        "category": "Text"
      }
    ]
  }
{% endschema %}

{%- if template.name == "product" and product.metafields.custom.module_image_row_handle != blank and product.metafields.custom.module_image_row_handle != "" -%}
  {%- assign preferredMetaobject = section.settings.tp_metaobject -%}
  {%- assign tempHandle = product.metafields.custom.module_image_row_handle -%}
{%- elsif template.name == "collection" and collection.metafields.custom.module_image_row_handle != blank and collection.metafields.custom.module_image_row_handle != "" -%}
  {%- assign preferredMetaobject = section.settings.tp_metaobject -%}
  {%- assign tempHandle = collection.metafields.custom.module_image_row_handle -%}
{%- else -%}
  {%- assign preferredMetaobject = section.settings.tp_metaobject -%}
  {%- assign tempHandle = section.settings.metaobject_handle -%}
{%- endif -%}
{% assign metaobject_id = section.settings.tp_metaobject %}
{% assign my_metaobject = shop.metaobjects.image_row[metaobject_id] %}

{% render 'tp-image-row', my_metaobject: my_metaobject %} 